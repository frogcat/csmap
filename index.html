<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
  <title>CSMap</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
  <script src="https://unpkg.com/promise-polyfill@6.0.2/promise.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-hash@0.2.1/leaflet-hash.js"></script>
  <script src="https://frogcat.github.io/leaflet-control-swipe/leaflet-control-swipe.js"></script>
  <script src="dem-curvature-slope-layer.js"></script>
</head>

<body>
  <div id="map" style="position:absolute;top:0;left:0;right:0;bottom:0;"></div>
  <script>
    var map = L.map("map", L.extend({
      minZoom: 0,
      maxZoom: 16,
      zoom: 8,
      center: [35.658342, 139.701462]
    }, L.Hash.parseHash(location.hash)));
    L.hash(map);

    var tmpl = "https://cyberjapandata.gsi.go.jp/xyz/{id}/{z}/{x}/{y}.{suffix}";
    L.control.layers({
      "標準地図": L.tileLayer(tmpl, {
        id: "std",
        suffix: "png"
      }).addTo(map),
      "写真": L.tileLayer(tmpl, {
        id: "ort",
        suffix: "jpg"
      }),
      "色別標高図": L.tileLayer(tmpl, {
        id: "relief",
        suffix: "png"
      }),
      "土地利用図": L.tileLayer(tmpl, {
        id: "lum200k",
        suffix: "png",
        minZoom: 11,
        maxNativeZoom: 14
      })
    }).addTo(map);

    map.attributionControl.addAttribution("<a href='http://maps.gsi.go.jp/development/ichiran.html'>地理院タイル</a>");
    map.attributionControl.addAttribution("<a href='https://github.com/frogcat/csmap'>fork me on GitHub</a>");

    L.control.scale({
      imperial: false
    }).addTo(map);

    L.demCurvatureSlopeLayer("https://cyberjapandata.gsi.go.jp/xyz/dem/{z}/{x}/{y}.txt", {
      pane: "swipePane",
      minZoom: 9,
      maxZoom: 18,
      maxNativeZoom: 14,
      opacity: 0.8
    }).addTo(map);

    L.demCurvatureSlopeLayer("https://cyberjapandata.gsi.go.jp/xyz/demgm/{z}/{x}/{y}.txt", {
      pane: "swipePane",
      minZoom: 0,
      maxZoom: 8,
      opacity: 0.8
    }).addTo(map);

    L.control.swipe().addTo(map);
  </script>
</body>

</html>
